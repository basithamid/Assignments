package threading;

class WaterTank implements Runnable{
	Thread inlet,outlet,controller;
	static double waterLevel,waterCapacity;
	static double waterLevelPercentage;
	public WaterTank(double waterCapacity){
		this.waterCapacity=waterCapacity;
		this.waterLevelPercentage= 80;
		this.waterLevel=(80/100)*this.waterCapacity;
		inlet = new Thread(this);
		inlet.setName("Inlet");
		inlet.start();
		outlet = new Thread(this);
		outlet.setName("Outlet");
		outlet.start();
		controller = new Thread(this);
		controller.setName("Controller");
		controller.setDaemon(true);
		controller.start();
	}
	public void run(){
		Thread currentThread = Thread.currentThread();
		System.out.println("Hi");
		if(currentThread.getName().equals("Inlet")){
			this.waterLevel+=50;
			this.waterLevelPercentage = (this.waterLevel/this.waterCapacity)*100;
			System.out.println("Water Level"+this.waterLevel);
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
		else if(currentThread.getName().equals("Outlet")){
			this.waterLevel-=70;
			this.waterLevelPercentage = (this.waterLevel/this.waterCapacity)*100;
			System.out.println("Water Level"+this.waterLevel);
			try {
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
		}
		else if(currentThread.getName().equals("Controller")){
			if(this.waterLevelPercentage < 80 ){
				this.inlet.suspend();
				this.outlet.resume();
				
			}
			else if(this.waterLevelPercentage > 80){
				this.outlet.suspend();
				this.inlet.resume();
			}
		}
	}
}

public class WaterTankThreading {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		WaterTank waterTank = new WaterTank(1000);

	}

}
